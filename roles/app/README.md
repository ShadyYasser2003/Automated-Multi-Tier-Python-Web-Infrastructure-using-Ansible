๐ฆ Ansible Role: app โ Deploy Flask Application with Gunicorn
๐ ุงููุฏู ูู ุงูุฑูู

ูุฐู ุงูุฑูู ูุตููุฉ ููุดุฑ ูุดุฑูุน Flask (Back-End) ููุท ุนูู ุณูุฑูุฑ ููููุณ ุจุงุณุชุฎุฏุงู:

    Python virtual environment (venv)

    Gunicorn ูู WSGI server

    systemd ูุชุดุบูู ุงูุฎุฏูุฉ ุชููุงุฆููุง

    โ๏ธ ูุฐู ุงูุฑูู ูุง ุชุชุนุงูู ูุน ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Front-End) ุฃู Nginx ูุจุงุดุฑุฉ. ูููุถู ุงุณุชุฎุฏุงููุง ููุท ูุน ุชุทุจูู Flask ูุณุคูู ุนู ุงูู API ุฃู ุตูุญุงุช HTML ุจุณูุทุฉ.

๐ง ูุชู ุชุณุชุฎุฏู ูุฐู ุงูุฑููุ

    ุนูุฏ ูุดุฑ ูุดุฑูุน Flask ุฌุฏูุฏ.

    ุนูุฏ ุฅุนุงุฏุฉ ูุดุฑ ูุดุฑูุน ุชู ุชุนุฏููู.

    ุนูุฏ ุชุฑุญูู ูุดุฑูุน Flask ุฅูู ุณูุฑูุฑ ุฌุฏูุฏ.

    ูู ุฃู ุณููุงุฑูู ูููู ููู ุงูุชุทุจูู ูู Back-End ููุท ููุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช ุฃู ููุฏู ุตูุญุงุช HTML ุนุจุฑ Jinja2.

๐ ููููุฉ ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฑูู

ูู ูุง ุนููู ูู ุชุบููุฑ ููู ุงููุชุบูุฑุงุช ูู ุงูููู vars/main.yml:

app_name: votingsystem      # ุงุณู ูุฌูุฏ ุงููุดุฑูุน ูุงุณู ุฎุฏูุฉ systemd
app_entry: app              # ุงุณู ููู Python ุงูุฃุณุงุณู (ุจุฏูู .py)
app_dir: "/opt/{{ app_name }}"
venv_dir: "{{ app_dir }}/venv"

ุซู:

    ุชุฃูุฏ ุฃู ูุดุฑูุนู (ุงูุฐู ูุญุชูู ุนูู app.py, requirements.txt, templates, static) ููุฌูุฏ ุฏุงุฎู ูุฌูุฏ ุจููุณ ุงุณู app_name.

    ุดุบูู ุงูู playbook ุนูู ุงูุณูุฑูุฑ:

    ansible-playbook site.yml -l app1

๐ ูููู ุงููุดุฑูุน ุงููุทููุจ

ุงูุชุฑุถ ุฃู app_name: votingsystem

votingsystem/
โโโ app.py              โ ูุฐุง ูู app_entry
โโโ requirements.txt
โโโ static/
โโโ templates/

๐ ูุง ุงูุฐู ุชูุนูู ูุฐู ุงูุฑูู ุจุงูุชุญุฏูุฏุ

    ุชุฑูุน ูุฌูุฏ ุงููุดุฑูุน ุจุงููุงูู ุฅูู /opt/{{ app_name }}

    ุชูุดุฆ virtual environment ุฏุงุฎู ูุฐุง ุงููุณุงุฑ

    ุชุซุจูุช ุฌููุน ุงูู dependencies ูู requirements.txt ุฏุงุฎู venv

    ุชุซุจูุช Gunicorn ุฏุงุฎู venv

    ุชุฌูุฒ ููู systemd ูุชุดุบูู ุงูุฎุฏูุฉ ุชููุงุฆููุง

    ุชุดุบู ุงูุฎุฏูุฉ ุจุงุณู {{ app_name }}.service

๐ก ุฃูุซูุฉ ููุงุณุชุฎุฏุงู ุงููุณุชูุจูู
โ ูุดุฑูุน ุชุตููุช ุจุณูุท

    back-end ููุท

    Flask API + HTML

    ุงุณุชุฎุฏู ูุฐู ุงูุฑูู

โ ูุดุฑูุน Front-End Angular

    ูุง ุชุณุชุฎุฏู ูุฐู ุงูุฑูู

    ุงุณุชุฎุฏู ุฑูู ุฎุงุตุฉ ุจู nginx ุฃู static hosting

โ ูุดุฑูุน Flask API

    ุจุฏูู HTML

    ููุฏู JSON responses

    ุงุณุชุฎุฏู ูุฐู ุงูุฑูู

๐ ููู ุชุญุฏุซ ุงูุฑูู ููุดุฑูุน ุฌุฏูุฏุ

    ุบูุฑ app_name, app_entry ุญุณุจ ูุดุฑูุนู ุงูุฌุฏูุฏ.

    ุชุฃูุฏ ุฅูู ุญุทูุช ูููุฏุฑ ุงููุดุฑูุน ุงูุฌุฏูุฏ ุจููุณ ุงุณู app_name ูู ููุณ ููุงู ุงูู playbook.

    ุดุบู ุงูู playbook.

ูู ุชุญุจ ุฃุถูู ูุซุงู ุนููู ููุดุฑูุน pollsapp ุฌูู ููุณ ุงูุฑูู ููุฑุฌุน ุชุฌุฑูุจูุ
